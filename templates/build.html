{% extends "layout.html" %}

{% block header %}
{% endblock %}

{% block nav %}
{% endblock %}

{% block section %}
    
    <div id="build_apk" class="panel panel-info", style="max-width: 300px; margin: 0 auto; ">
        <div class="panel-heading">
            <h3 class="panel-title">Build APK</h3>
        </div>
        <div class="panel-body">
            <div id="build">
                <form @submit.prevent="submit" class="form-horizontal">
                    <fieldset>
                        <div class="col-lg-10 col-lg-offset-2">
                            <button type="submit" class="btn btn-success" style="margin: 0 auto; ">Build</button>
                        </div>
                    </fieldset>
                </form>
            </div>
        </div>
    </div>
    
{% endblock %}

{% block footer %}
{% endblock %}

{% block script %}
    <script>
        new Vue({
            el: '#build',
            data: {
                apiUrl: '/api/build_and_sign_apk',
                redirectURL: '/emulator'
            },
            methods: {
                submit: function(event) {
                    this.$http.post(this.apiUrl, )
                        .then(function (response) {
                            window.location.href = this.redirectURL;
                    }, function (err) {
                        alert('Build Error')
                        console.log(err)
                    })

                }
            }

        })
    </script>
{% endblock %}